{"version":3,"sources":["../../../../src/modules/zpl/dto/batch.dto.ts"],"sourcesContent":["import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport {\n  IsString,\n  IsArray,\n  IsNotEmpty,\n  ValidateNested,\n  ArrayMinSize,\n  IsEnum,\n  IsOptional,\n} from 'class-validator';\nimport { Type } from 'class-transformer';\n\n// Input DTOs\nexport class BatchFileDto {\n  @ApiProperty({ description: 'UUID generated by frontend' })\n  @IsString()\n  @IsNotEmpty()\n  id: string;\n\n  @ApiProperty({ description: 'ZPL content' })\n  @IsString()\n  @IsNotEmpty()\n  content: string;\n\n  @ApiProperty({ description: 'Original file name' })\n  @IsString()\n  @IsNotEmpty()\n  fileName: string;\n}\n\nexport class BatchConvertDto {\n  @ApiProperty({ type: [BatchFileDto], description: 'Array of ZPL files to convert' })\n  @IsArray()\n  @ArrayMinSize(1)\n  @ValidateNested({ each: true })\n  @Type(() => BatchFileDto)\n  files: BatchFileDto[];\n\n  @ApiProperty({ description: 'Label size (e.g., 4x6, 4x4)' })\n  @IsString()\n  @IsNotEmpty()\n  labelSize: string;\n\n  @ApiPropertyOptional({ enum: ['pdf', 'png', 'jpeg'], default: 'pdf' })\n  @IsOptional()\n  @IsEnum(['pdf', 'png', 'jpeg'])\n  outputFormat?: 'pdf' | 'png' | 'jpeg';\n}\n\n// Response DTOs\nexport class BatchJobMappingDto {\n  @ApiProperty()\n  fileId: string;\n\n  @ApiProperty()\n  jobId: string;\n}\n\nexport class BatchConvertResponseDto {\n  @ApiProperty()\n  batchId: string;\n\n  @ApiProperty({ type: [BatchJobMappingDto] })\n  jobs: BatchJobMappingDto[];\n}\n\nexport class BatchFileStatusDto {\n  @ApiProperty()\n  jobId: string;\n\n  @ApiProperty({ enum: ['pending', 'processing', 'completed', 'failed'] })\n  status: string;\n\n  @ApiProperty()\n  progress: number;\n\n  @ApiPropertyOptional()\n  error?: string;\n}\n\nexport class BatchStatusResponseDto {\n  @ApiProperty()\n  batchId: string;\n\n  @ApiProperty({ enum: ['processing', 'completed', 'partial', 'failed'] })\n  status: string;\n\n  @ApiProperty()\n  totalFiles: number;\n\n  @ApiProperty()\n  completedFiles: number;\n\n  @ApiProperty({ type: [BatchFileStatusDto] })\n  jobs: BatchFileStatusDto[];\n\n  @ApiPropertyOptional()\n  downloadUrl?: string;\n}\n\nexport class BatchDownloadResponseDto {\n  @ApiProperty()\n  url: string;\n\n  @ApiProperty()\n  filename: string;\n\n  @ApiProperty()\n  expiresAt: string;\n}\n\n// Error DTOs\nexport class BatchErrorDto {\n  @ApiProperty()\n  error: string;\n\n  @ApiProperty()\n  message: string;\n}\n"],"names":["ApiProperty","ApiPropertyOptional","IsString","IsArray","IsNotEmpty","ValidateNested","ArrayMinSize","IsEnum","IsOptional","Type","BatchFileDto","description","BatchConvertDto","type","each","enum","default","BatchJobMappingDto","BatchConvertResponseDto","BatchFileStatusDto","BatchStatusResponseDto","BatchDownloadResponseDto","BatchErrorDto"],"mappings":";;;;;;;;;AAAA,SAASA,WAAW,EAAEC,mBAAmB,QAAQ,kBAAkB;AACnE,SACEC,QAAQ,EACRC,OAAO,EACPC,UAAU,EACVC,cAAc,EACdC,YAAY,EACZC,MAAM,EACNC,UAAU,QACL,kBAAkB;AACzB,SAASC,IAAI,QAAQ,oBAAoB;AAEzC,aAAa;AACb,OAAO,MAAMC;AAeb;;;QAdiBC,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;AAM9B,OAAO,MAAMC;AAiBb;;;QAhBiBC,MAAM;YAACH;SAAa;QAAEC,aAAa;;;;;QAGhCG,MAAM;;aACZJ;;;;;QAGGC,aAAa;;;;;;;;QAKLI,MAAM;YAAC;YAAO;YAAO;SAAO;QAAEC,SAAS;;;;QAErD;QAAO;QAAO;;;;AAIzB,gBAAgB;AAChB,OAAO,MAAMC;AAMb;;;;;;;;;AAEA,OAAO,MAAMC;AAMb;;;;;;;QAFiBL,MAAM;YAACI;SAAmB;;;;AAI3C,OAAO,MAAME;AAYb;;;;;;;QARiBJ,MAAM;YAAC;YAAW;YAAc;YAAa;SAAS;;;;;;;;;;;;AAUvE,OAAO,MAAMK;AAkBb;;;;;;;QAdiBL,MAAM;YAAC;YAAc;YAAa;YAAW;SAAS;;;;;;;;;;;;;;QAStDF,MAAM;YAACM;SAAmB;;;;;;;;AAO3C,OAAO,MAAME;AASb;;;;;;;;;;;;;AAEA,aAAa;AACb,OAAO,MAAMC;AAMb"}