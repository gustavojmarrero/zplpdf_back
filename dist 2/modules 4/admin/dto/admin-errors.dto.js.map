{"version":3,"sources":["../../../../src/modules/admin/dto/admin-errors.dto.ts"],"sourcesContent":["import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { IsOptional, IsString, IsNumber, Min, Max, IsDateString, IsEnum } from 'class-validator';\nimport { Type } from 'class-transformer';\n\nexport class GetErrorsQueryDto {\n  @ApiPropertyOptional({ default: 1 })\n  @IsOptional()\n  @Type(() => Number)\n  @IsNumber()\n  @Min(1)\n  page?: number = 1;\n\n  @ApiPropertyOptional({ default: 100, maximum: 500 })\n  @IsOptional()\n  @Type(() => Number)\n  @IsNumber()\n  @Min(1)\n  @Max(500)\n  limit?: number = 100;\n\n  @ApiPropertyOptional({ enum: ['error', 'warning', 'critical'] })\n  @IsOptional()\n  @IsEnum(['error', 'warning', 'critical'])\n  severity?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by error type' })\n  @IsOptional()\n  @IsString()\n  type?: string;\n\n  @ApiPropertyOptional({ description: 'Start date (ISO 8601)' })\n  @IsOptional()\n  @IsDateString()\n  startDate?: string;\n\n  @ApiPropertyOptional({ description: 'End date (ISO 8601)' })\n  @IsOptional()\n  @IsDateString()\n  endDate?: string;\n\n  @ApiPropertyOptional({ description: 'Filter by user ID' })\n  @IsOptional()\n  @IsString()\n  userId?: string;\n}\n\nclass ErrorContextDto {\n  @ApiProperty({ required: false })\n  line?: number;\n\n  @ApiProperty({ required: false })\n  command?: string;\n\n  @ApiProperty({ required: false })\n  input_length?: number;\n\n  @ApiProperty({ required: false })\n  label_count?: number;\n\n  @ApiProperty({ required: false })\n  elapsed_ms?: number;\n\n  @ApiProperty({ required: false })\n  output_format?: string;\n\n  @ApiProperty({ required: false })\n  service?: string;\n\n  @ApiProperty({ required: false })\n  pool_size?: number;\n\n  @ApiProperty({ required: false })\n  active_connections?: number;\n}\n\nclass ErrorItemDto {\n  @ApiProperty()\n  id: string;\n\n  @ApiProperty()\n  type: string;\n\n  @ApiProperty()\n  code: string;\n\n  @ApiProperty()\n  message: string;\n\n  @ApiProperty({ required: false })\n  userId?: string;\n\n  @ApiProperty({ required: false })\n  userEmail?: string;\n\n  @ApiProperty({ required: false })\n  jobId?: string;\n\n  @ApiProperty()\n  timestamp: Date;\n\n  @ApiProperty({ enum: ['error', 'warning', 'critical'] })\n  severity: string;\n\n  @ApiProperty({ type: ErrorContextDto, required: false })\n  context?: ErrorContextDto;\n}\n\nclass ErrorsSummaryDto {\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  bySeverity: {\n    error: number;\n    warning: number;\n    critical: number;\n  };\n\n  @ApiProperty()\n  byType: Record<string, number>;\n}\n\nclass PaginationDto {\n  @ApiProperty()\n  page: number;\n\n  @ApiProperty()\n  limit: number;\n\n  @ApiProperty()\n  total: number;\n\n  @ApiProperty()\n  totalPages: number;\n}\n\nclass ErrorsDataDto {\n  @ApiProperty({ type: [ErrorItemDto] })\n  errors: ErrorItemDto[];\n\n  @ApiProperty({ type: ErrorsSummaryDto })\n  summary: ErrorsSummaryDto;\n\n  @ApiProperty({ type: PaginationDto })\n  pagination: PaginationDto;\n}\n\nexport class AdminErrorsResponseDto {\n  @ApiProperty()\n  success: boolean;\n\n  @ApiProperty({ type: ErrorsDataDto })\n  data: ErrorsDataDto;\n}\n"],"names":["ApiProperty","ApiPropertyOptional","IsOptional","IsString","IsNumber","Min","Max","IsDateString","IsEnum","Type","GetErrorsQueryDto","page","limit","default","Number","maximum","enum","description","ErrorContextDto","required","ErrorItemDto","type","ErrorsSummaryDto","PaginationDto","ErrorsDataDto","AdminErrorsResponseDto"],"mappings":";;;;;;;;;AAAA,SAASA,WAAW,EAAEC,mBAAmB,QAAQ,kBAAkB;AACnE,SAASC,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,GAAG,EAAEC,YAAY,EAAEC,MAAM,QAAQ,kBAAkB;AACjG,SAASC,IAAI,QAAQ,oBAAoB;AAEzC,OAAO,MAAMC;;aAMXC,OAAgB;aAQhBC,QAAiB;;AA0BnB;;;QAvCyBC,SAAS;;;aAEpBC;;;;;;;QAKWD,SAAS;QAAKE,SAAS;;;aAElCD;;;;;;;;QAMWE,MAAM;YAAC;YAAS;YAAW;SAAW;;;;QAEpD;QAAS;QAAW;;;;;;QAGNC,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;AAMtC,IAAA,AAAMC,kBAAN,MAAMA;AA2BN;;;QA1BiBC,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;AAI3B,IAAA,AAAMC,eAAN,MAAMA;AA8BN;;;;;;;;;;;;;;;;;;;QAjBiBD,UAAU;;;;;;QAGVA,UAAU;;;;;;QAGVA,UAAU;;;;;;;;;;QAMVH,MAAM;YAAC;YAAS;YAAW;SAAW;;;;;;QAGtCK,MAAMH;QAAiBC,UAAU;;;;AAIlD,IAAA,AAAMG,mBAAN,MAAMA;AAaN;;;;;;;;;;;;;AAEA,IAAA,AAAMC,gBAAN,MAAMA;AAYN;;;;;;;;;;;;;;;;;AAEA,IAAA,AAAMC,gBAAN,MAAMA;AASN;;;QARiBH,MAAM;YAACD;SAAa;;;;;;QAGpBC,MAAMC;;;;;;QAGND,MAAME;;;;AAIvB,OAAO,MAAME;AAMb;;;;;;;QAFiBJ,MAAMG"}